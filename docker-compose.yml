version: '3.8'

services:
  # MongoDB Database
  mongodb:
    image: mongo:latest
    container_name: judge-mongo
    ports:
      - "27017:27017" # Maps localhost:27017 to the container's port
    volumes:
      - mongo-data:/data/db # Persists database data on your machine
    networks:
      - judge-network

  # RabbitMQ Message Broker
  rabbitmq:
    image: rabbitmq:3-management
    container_name: judge-rabbitmq
    ports:
      - "5672:5672"   # Port for the services to connect
      - "15672:15672" # Port for the web management UI
    networks:
      - judge-network

volumes:
  mongo-data: # Defines the named volume for persistence

networks:
  judge-network:
    driver: bridge